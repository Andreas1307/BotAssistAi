<!DOCTYPE html>
<html>
<head><meta charset="utf-8"/><title>Redirecting…</title></head>
<body style="text-align:center;margin-top:30vh;font-family:sans-serif">
  <h3>Redirecting…</h3>
  <script>
    const p = new URLSearchParams(location.search);
    const target = p.get("target");
    const shop = p.get("shop");

    // receive message from embedded iframe
    window.addEventListener("message", (e) => {
      try {
        const d = JSON.parse(e.data);
        if (d.event === "redirect" && d.target) {
          top.location.replace(d.target);
        }
      } catch {}
    });

    // direct navigation if opened directly
    if (target) top.location.replace(decodeURIComponent(target));
    else if (shop) top.location.replace(`https://${shop}/admin/apps/botassistai?shop=${shop}`);
    else top.location.replace("https://botassistai.com/");
  </script>
</body>
</html>