<!DOCTYPE html>
<html>
  <head><meta charset="utf-8" /><title>Redirecting…</title></head>
  <body style="font-family:sans-serif;text-align:center;margin-top:30vh">
    <h3>Redirecting…</h3>
    <script>
      const params = new URLSearchParams(window.location.search);
      const shop = params.get("shop");
      const target = params.get("target");

      if (target) {
        // Used for billing/auth redirects
        window.top.location.href = decodeURIComponent(target);
      } else if (shop) {
        // Used for initial auth
        window.top.location.href = `https://api.botassistai.com/shopify/auth?shop=${encodeURIComponent(shop)}`;
      } else {
        document.body.textContent = "Missing parameters.";
      }
    </script>
  </body>
</html>