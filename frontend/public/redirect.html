<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Redirecting…</title>
  </head>
  <body style="font-family:sans-serif;text-align:center;margin-top:30vh">
    <h3>Redirecting to Shopify authentication…</h3>
    <script>
      const shop = new URLSearchParams(window.location.search).get("shop");
      if (!shop) {
        document.body.textContent = "Missing shop parameter.";
      } else {
        // ✅ Top-level navigation (avoids SecurityError)
        const authUrl = `https://api.botassistai.com/shopify/auth?shop=${encodeURIComponent(shop)}`;
        window.top.location.href = authUrl; // ← use _top, not window.location
      }
    </script>
  </body>
</html>
